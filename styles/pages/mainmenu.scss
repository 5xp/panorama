@use '../config' as *;
@use '../abstract/function';

#TooltipManager,
#ContextMenuManager,
#PopupManager,
.MainMenuRootPanel {
	width: 100%;
	height: 100%;
}

.MainMenuRootPanel.PopupBackgroundBlur #MainMenuInput {
	blur: gaussian(8, 8, 5);
	-s2-mix-blend-mode: opaque;
}

.MainMenuModeOnly {
	visibility: visible;
}

.MainMenuRootPanel--PauseMenuMode .MainMenuModeOnly {
	visibility: collapse;
}

.PauseMenuModeOnly {
	visibility: collapse;
}

.MainMenuRootPanel--PauseMenuMode .PauseMenuModeOnly {
	visibility: visible;
}

.mainmenu {
	width: 100%;
	height: 100%;

	&__blur {
		width: 100%;
		height: 100%;
		blur: fastgaussian(4, 4, 3);
	}

	&__topnav {
		height: 100px;
		width: 100%;
		background-color: function.gradient-vertical(rgba(95, 95, 95, 0.3), rgba(54, 54, 54, 0.3));
	}

	&__rightnav {
		width: 50px;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.5);
		flow-children: down;
		horizontal-align: right;
	}

	&__movie {
		width: 1920px;
		height: 1080px;
		overflow: noclip;

		.AspectRatio4x3,
		.AspectRatio5x4 {
			transform: translateX(-17%);
			overflow: noclip;
		}

		.AspectRatio16x10 {

			transform: translateX(-10%);
			overflow: noclip;
		}

		.AspectRatio21x9 {
			width: 2580px;
			height: 1080px;
			transform: scaleY(1.3) translateY(-15%);
			overflow: noclip;
		}
	}

	&__contentwrapper {
		width: fill-parent-flow(1.0);
		height: 100%;
	}

	&__homecontent,
	&__content {
		width: fill-parent-flow(1.0);
		height: 100%;
		opacity: 1.0;

		&--hidden {
			opacity: 0.0;
		}
	}

	&__contentblur {
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.875);
	}

	&__pagecontent {
		padding: 30px 100px;
		flow-children: down;
		width: 100%;
		height: 100%;
	}
}

.topnav {
	&__wrapper {
		width: 100%;
		height: 100%;
		flow-children: right;
		z-index: 1;
	}

	&__shadow {
		// Getting the shadow to reach to the edge of the window has been difficult. transform break the shadowing so
		// can't stretch it, negative padding/margin values don't work. The only thing that DOES is `width: 2000%; overflow: noclip noclip;`
		// making the width incredibly high makes stuff suddenly work for some terrible reason. But it's too hacky to include, and I actually
		// prefer when the shadow doesn't cover the rightnav.
		width: 100%;
		height: 100%;
		box-shadow: 0 0 24px rgba(0, 0, 0, 1);
		z-index: 0;
	}

	&__home {
		height: 100%;
		background-color: rgba(255, 255, 255, 0);
		transition: background-color 0.2s ease-in-out 0s;
		transition-property: opacity, background-color;
		transition-duration: 0.2s;
		transition-timing-function: ease-in-out;

		&:hover {
			background-color: gradient(radial, 50% 100%, 0% 0%, 100% 100%, from(rgba(255, 255, 255, 0.3)), to(rgba(255, 255, 255, 0.2)));
			box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.2);

		}

		.RadioBox {
			visibility: collapse;
		}
	}

	&__logo {
		margin: 0 24px;
		vertical-align: middle;
		// img-shadow: 1px 1px 8px 1 black;
	}

	&__button {
		height: 100%;
		vertical-align: middle;
		padding: 25px;
		background-color: gradient(radial, 50% 100%, 0% 0%, 100% 100%, from(rgba(128, 128, 128, 0)), to(rgba(128, 128, 128, 0))); //
		box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
		transition-property: background-color, box-shadow;
		transition-duration: 0.1s;
		transition-timing-function: ease-out;

		& .RadioBox {
			visibility: collapse;
		}

		&-image {
			width: height-percentage(100%);
			height: 100%;
			vertical-align: middle;
			color: white;
			opacity: 0.75;
			// TODO: opacity of the color of img-shadow doesn't seem to work, opacity 1 is too strong.
			// img-shadow: 0px 0px 5px 0 rgba(0, 0, 0, 1);
			transition-property: opacity;
			transition-duration: 0.1s;
			transition-timing-function: ease-in;
		}

		$this: &;
		&:hover {
			background-color: gradient(radial, 50% 100%, 0% 0%, 100% 100%, from(rgba(255, 255, 255, 0.25)), to(rgba(209, 209, 209, 0.25)));
			box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.35);

			#{$this}-image {
				opacity: 1.0;
			}
		}

		&:selected {
			background-color: gradient(radial, 50% 100%, 0% 0%, 100% 100%, from(rgba(88, 88, 88, 0.7)), to(rgba(20, 20, 20, 0.7)));
			box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.3);

			#{$this}-image {
				opacity: 1.0;
			}
		}

		&:selected:hover {
			background-color: gradient(radial, 50% 100%, 0% 0%, 100% 100%, from(rgba(70, 70, 70, 0.8)), to(rgba(20, 20, 20, 0.8)));
		}
	}
}

.rightnav {
	&__button {
		width: 100%;
		height: width-percentage(100%);
		padding: 12px 12px;
		background-color: rgba(255, 255, 255, 0);
		transition: background-color 0.1s ease-in-out 0s;

		& .RadioBox {
			visibility: collapse;
		}

		&-image {
			width: 100%;
			height: width-percentage(100%);
			vertical-align: middle;
			opacity: 0.75;
			transition: opacity 0.1s ease-in-out 0s;
		}

		$this: &;
		&:hover,
		&:selected {
			background-color: rgba(255, 255, 255, 0.15);

			#{$this}-image {
				opacity: 1.0;
			}
		}
	}

	&__drawerbutton {
		height: fill-parent-flow(1.0);
	}
}

.homecontent {
	&__newspanel {
		width: 840px;
		height: 500px;
	}

	&__modelpanel {
		width: 700px;
		height: 100%;
		margin-right: 120px;
		horizontal-align: right;
		vertical-align: middle;
	}

	&__bottombar {
		flow-children: right;
		horizontal-align: left;
		vertical-align: bottom;
	}

	&--hidden {
		visibility: collapse;
	}
}

.news {
	width: 100%;
	height: 100%;
	flow-children: down;
	margin: 24px;
	padding: 8px;
	background-color: rgba(0, 0, 0, 0.5);
	box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.3);

	&__latest {
		width: 100%;
		height: 258px; // This is a magic number because Panorama likes to scale stuff a bunch. Should be equal to the Actual Height Value of latestimage.
		flow-children: right;
	}

	&__latest-details {
		width: 40%;
		margin-right: 8px;
		flow-children: down;
	}

	&__latest-description {
		height: fill-parent-flow(1.0);
		padding-bottom: 4px;
		text-overflow: ellipsis;
		font-size: 14px;
	}

	&__latest-image {
		width: 500px;
		height: width-percentage(56.25%)
	}

	&__latest-learnmore {
		width: 100%;
		vertical-align: bottom;
	}

	&__other {
		width: 100%;
		height: 100%;
		padding-top: 8px;
		padding-bottom: 16px;
		flow-children: right;
		overflow: scroll squish;
	}

	&__other-item {
		height: 100%;
		width: 274px; // Another alignment magic number, 16/9 * image's actual height
		margin-right: 8px;
	}

	&__other-image {
		transition: wash-color 0.1s linear 0s;

		&:hover {
			wash-color: rgb(222, 222, 222);
		}
	}
}

.bottombar {
	&__button {
		height: 48px;
		width: 48px;
		margin: 16px;

		& .RadioBox {
			visibility: collapse;
		}

		&-image {
			width: 100%;
			height: width-percentage(100%);
			vertical-align: middle;
			opacity: 0.75;
			transition: opacity 0.1s ease-in-out 0s;
			img-shadow: 0 0 2px 1 rgba(0, 0, 0, 1);
		}
	}
}

// These will get cleaned up in settings converion
.content-navbar {
	width: 100%;
	background-color: rgba(255, 255, 255, 0.05);
}

.content-navbar__title {
	padding: 10px 0px;
}

.content-navbar__tabs {
	flow-children: right;
}
