<root>
	<styles>
		<include src="file://{resources}/styles/chaosstyles.css" />
		<include src="file://{resources}/styles/mainmenu.css" />
		<include src="file://{resources}/styles/controls/button.css" />
	</styles>
	<scripts>
		<include src="file://{resources}/scripts/mainmenu.js" />
	</scripts>

	<snippets>
		<snippet name="MainMenuMovieSnippet">
			<Panel>
				<!-- Source is set in script. -->
				<!-- Set what you want the movie to be using the data-type example 'nuke' the .webm is appended in script. -->
				<Movie class="mainmenu-movie MainMenuModeOnly" 
					id="MainMenuMovie"
					src=""
					sound=""
					controls="none"
					repeat="true"
					hittest="false">
				</Movie>
			</Panel>
		</snippet>
		<snippet name="MainMenuVanitySnippet">
			<Panel>
			</Panel>
		</snippet>
	</snippets>

	<ChaosMainMenu class="InitialDisplay MainMenuRootPanel" hittest="false" useglobalcontext="true" onload="MainMenuController.onMainMenuLoaded()" oncancel="MainMenuController.onEscapeKeyPressed();">
		<BaseBlurTarget id="MainMenuBlur" blurrects="MainMenuContentBlur JsMainMenuNavBar MainMenuOptionListRight">
			<Panel id="MainMenuMovieParent">
			<!-- Movie added/removed dynamically when changing the visibility of the main menu -->
			</Panel>
		</BaseBlurTarget>

		<!-- Background video -->
		<Panel id="MainMenuVanityParent">
			<!-- Vanity is not used but the engine needs this to exist -->
		</Panel>

		<Panel id="MainMenuInput" class="mainmenu-container">
			<BaseBlurTarget id="MainMenuBlur" blurrects="MainMenuContentBlur JsMainMenuNavBar MainMenuOptionListRight">
				
				<!-- In main menu, show the background -->
				<Image id="MainMenuBackground" class="full-width full-height MainMenuModeOnly" />

				<!-- In pause menu, show the existing backbuffer -->
				<ChaosBackbufferImagePanel class="full-width full-height PauseMenuModeOnly" />
			</BaseBlurTarget>

			<Panel class="full-width full-height top-bottom-flow">
				<Panel id="JsMainMenuNavBar" class="mainmenu-nav-list">
					<!-- This fills the entire width, is aligned to top and is used as the navbar -->
					<RadioButton id="HomeButton" onactivate="MainMenuController.onHomeButtonPressed()">
						<Image id="MainMenuLogo" src="file://{images}/topnav/momentumLogo.svg" textureheight="64" />
					</RadioButton>
					
					<Panel class="full-height left-right-flow">
						<RadioButton id="PlayButton" class="mainmenu-nav-item" onactivate="GameInterfaceAPI.ConsoleCommand('ShowMapSelectionPanel')">
							<Image src="file://{images}/topnav/playIcon.svg" textureheight="64" />
						</RadioButton>
						<RadioButton id="InventoryButton" class="mainmenu-nav-item">
							<Image src="file://{images}/topnav/inventoryIcon.svg" textureheight="64" />
						</RadioButton>
						<RadioButton id="ShopButton" class="mainmenu-nav-item">
							<Image src="file://{images}/topnav/shopIcon.svg" textureheight="64" />
						</RadioButton>
						<RadioButton id="LearnButton" class="mainmenu-nav-item">
							<Image src="file://{images}/topnav/learnIcon.svg" textureheight="64" />
						</RadioButton>
						<RadioButton id="SettingsButton" class="mainmenu-nav-item" onactivate="MainMenuController.navigateToTab('Settings', 'mainmenu_settings')">
							<Image src="file://{images}/topnav/settingsIcon.svg" textureheight="64" />
						</RadioButton>
					</Panel>
					
					<Panel class="full-height left-right-flow horizontal-align-right">
						<RadioButton id="NotificationsButton" class="mainmenu-nav-item">
							<Image src="file://{images}/topnav/notificationIcon.svg" textureheight="64" />
						</RadioButton>
						<Frame class="full-height" src="file://{resources}/layout/player_card.xml" />
						<RadioButton id="QuitButton" class="mainmenu-nav-item" onactivate="MainMenuController.onQuitButtonPressed()">
							<Image src="file://{images}/topnav/quitIcon.svg" textureheight="64" />
						</RadioButton>
					</Panel>
				</Panel>
				
				<Panel class="full-width full-height left-right-flow">
					<Panel id="MainMenuContent">
						<Panel id="HomeContent">
							<Frame id="NewsPanel" class="MainMenuModeOnly" src="file://{resources}/layout/mainmenu_news.xml" />
							<ModelPanel id="MainMenuModel"
										src="models/custom_props/hd_logo.mdl"
										cubemap="cubemaps/cubemap_menu_model_bg.hdr"
										antialias="true"
										mouse_rotate="true" />
						</Panel>
						<Panel id="JsMainMenuContent" class="mainmenu-content mainmenu-content--hidden">
							<Panel id="MainMenuContentBlur" class="full-width full-height" />
							<!-- A panel gets inserted here dynamically from js, depending on which tab we click -->
						</Panel>
					</Panel>
				
					<Panel id="MainMenuOptionListRight" class="mainmenu-right-nav-list">
						<RadioButton id="ProfileButton" class="mainmenu-right-nav-item">
							<Image src="file://{images}/sidepanel/profileIcon.svg" textureheight="32" />
						</RadioButton>
						<RadioButton id="LobbyButton" class="mainmenu-right-nav-item">
							<Image src="file://{images}/sidepanel/lobbyIcon.svg" textureheight="32" />
						</RadioButton>
						<RadioButton id="HostButton" class="mainmenu-right-nav-item">
							<Image src="file://{images}/sidepanel/wrIcon.svg" textureheight="32" />
						</RadioButton>
						<RadioButton id="ChangelogButton" class="mainmenu-right-nav-item">
							<Image src="file://{images}/sidepanel/newsIcon.svg" textureheight="32" />
						</RadioButton>
						
						<RadioButton id="SliderButton" class="mainmenu-right-nav-item">
							<Image src="file://{images}/sidepanel/arrowIcon.svg" textureheight="32" orientation="180" />
						</RadioButton>
					</Panel>
				</Panel>

			</Panel>
		</Panel>

		<!-- Make sure these are at the bottom to get the z-order right -->
		<ChaosPopupManager id="PopupManager" onpopupsdismissed="" />
		<ContextMenuManager id="ContextMenuManager" />
		<ChaosTooltipManager id="TooltipManager" hittest="false" />

		<!-- Doesn't actually include the notifications, but we use its position to figure out where to show them -->
		<Panel id="SteamNotificationsPlaceholder" hittest="false" />
	</ChaosMainMenu>
</root>
