<!--
    Purpose: Hard-coded layout file for <MomentumChat />
    Having a ChatHistory panel and ChatInput textentry is mandatory

    This panel will require a specific snippet, which are currently:
        lobby-chat-message: Message you receive from other players in your lobby
        lobby-chat-message-spec: Same as above, user is spectating someone

    Common dialog variables set for these snippets in-code are (depending on type):
        message: Raw or localized message string
        author_name: Name of the author
        author_xuid: Steam ID of the author

	Fair Warning: Exceeding the 127 character limit will get your messages rejected!
-->

<root>
	<styles>
        <include src="file://{resources}/styles/main.scss" />
		<include src="file://{resources}/styles/chat.css"/>
	</styles>
	<scripts>
		<include src="file://{resources}/scripts/chat.js"/>
	</scripts>
	<snippets>
		<!-- NOTE: html=true does NOT mean that HTML embedded in the dialog variable will get parsed! -->
		<snippet name="lobby-chat-message">
			<Panel class="lobby-chat-message__cont">
				<Label text="&lt;b&gt;{s:author_name}&lt;/b&gt;: {s:message}" html="true"/>
			</Panel>
		</snippet>
		<snippet name="lobby-chat-message-spec">
			<Panel class="lobby-chat-message__cont">
				<Image class="lobby-chat-message__spec-icon" src="file://{images}/chat/spectating.svg" textureheight="16" />
				<Label text="&lt;b&gt;{s:author_name}&lt;/b&gt;: {s:message}" html="true"/>
			</Panel>
		</snippet>
	</snippets>
	<Panel class="chat-container bottom-top-flow" defaultfocus="ChatInput">
		<!-- CAUTION: inverse flow everywhere!!-->
		<ConVarEnabler convar="mom_chat_typing_receive" togglevisibility="true">
			<Label id="ChatMemberTypingLabel" text=" "/>
		</ConVarEnabler>
		<Panel class="right-left-flow align-right">
			<Button class="chat-container__button" onactivate="$('#ChatInput').Submit()">
				<Label text="SEND"/>
			</Button>
			<TextEntry id="ChatInput" oninputsubmit="Chat.submitText()" maxchars="127" clearaftersubmit="true"/>
		</Panel>
		<Panel id="ChatHistory" class="bottom-top-flow" html="true">
			<!-- C++ will add messages here! Each child will have the chat-entry class -->
		</Panel>
	</Panel>
</root>